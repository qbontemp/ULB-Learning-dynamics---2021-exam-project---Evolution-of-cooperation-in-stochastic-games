
## Presentation

This project has for goal to reproduce (at least partially) the results of the article 
[**Evolution of cooperation in stochastic games**](https://www.nature.com/articles/s41586-018-0277-x		), and to compare those reproduced results to the original article.

As such, this repository contains the code (written in Python3) of the simulations required to produce comparable experiments as well as the data obtained by those simulations.

## Repository file structure

The main folders and files are the following :

+ experiments/: contains the python files used for generating the experiment data (an experiment being a set of simulations intended to test parameters)
+ experiments/dataSaver/: contains the saved simulations' data as numpy arrays
+ experiments/figureGenerators/: contains the python files necessary for generating the figures used our own article
+ prisoner_dilemma/: contains all the files necessary to compute the payoffs and cooperation rates for the prisoner's dilemma game
+ MonteCarlo.py: the code of the Monte Carlo simulation
+ Strategy.py: defines all the memory-one strategies

## Running the code

### dependencies
The python code needs python3.5 or higher as well as the numpy and matplotlib libraries.

### generating the data
Reproducing our data amounts to running the programs (python files with names beginning with *DataGenerator*) included in the folder **experiments/**. 

Note that before calling the interpreter, it is necessary to add the other locations to the python path (the prisoner_dilemma/ folder and the two files MonteCarlo.py and Strategy.py). On Linux, this can be done by setting the PYTHONPATH environment variable as follows: 
				
	export PYTHONPATH=location1:location2:...:$PYTHONPATH

### generating the figures
The figures corresponding to each experiment can be obtained by running the corresponding python file in the folder **experiments/figureGenerators/**. 

## Output naming conventions

Two types of output files exist. The generated figures (png images) and the stored data (saved numpy arrays) generated by the simulations to create those figures.

First, the figure files are simply named after the python files that generate them, so the file *figure2.py* will generate the file *figure2.png*.

Second, there are 5 different types of data files stored:
+ the files containing the payoff matrices computed for the games, with names beginning with *PAYOFF_\<name of game\>* and then continuing with a list of the parameters used (the parameter name followed by its value, the two separated by an underscore).
+ the files containing the cooperation rate matrices computed for the games, with names beginning with *COOP_RATE_\<name of game\>* and then continuing with a list of the parameters used(the parameter name followed by its value, the two separated by an underscore).
+ the files containing the average cooperation rates of an evolving population in a simulation, with names beginning with *MC_MEAN_COOP_\<Monte-Carlo parameters\>_\<name of game\>_\<game parameters\>*, where *\<Monte-Carlo parameters\>* stands for a list of parameter names (related to the simulation) followed by an underscore and their value, and *\<game parameters\>* stands for a list of parameter names (related to the game) followed by an underscore and their value.
+ the files containing the average standard deviation of the cooperation rates of an evolving population in a simulation, with names beginning with *MC_STD_COOP_\<Monte-Carlo parameters\>_\<name of game\>_\<game parameters\>*, where *\<Monte-Carlo parameters\>* stands for a list of parameter names (related to the simulation) followed by an underscore and their value, and *\<game parameters\>* stands for a list of parameter names (related to the game) followed by an underscore and their value.
+ the files containing the last 1000 populations of each simulation run, with names beginning with *MC_POP_\<Monte-Carlo parameters\>_\<name of game\>_\<game parameters\>*, where *\<Monte-Carlo parameters\>* stands for a list of parameter names (related to the simulation) followed by an underscore and their value, and *\<game parameters\>* stands for a list of parameters names (related to the game) followed by an underscore and their value.

Note that sometimes the value of the parameter corresponding to the state transition probability (probabilityMoveStayState2) can be None in the data files names. It simply means that the parameter is not applicable since the given game does not use any transition probability.

## Miscellaneous

In the code (also in the name of some data files) you can encounter the name PDSD, this is an other name for the PSD2 game (as named in the generated figures). The difference in naming convention originates from a mistake and was not corrected on time.
